(function(d,n){"function"===typeof define&&define.amd?define(["jquery"],n):n(d.jQuery)})(this,function(d){function n(a){if(b.webkit&&!a)return{height:0,width:0};b.data.outer||(a={border:"none","box-sizing":"content-box",height:"200px",margin:"0",padding:"0",width:"200px"},b.data.inner=d("<div>").css(d.extend({},a)),b.data.outer=d("<div>").css(d.extend({left:"-1000px",overflow:"scroll",position:"absolute",top:"-1000px"},a)).append(b.data.inner).appendTo("body"));b.data.outer.scrollLeft(1E3).scrollTop(1E3);
return{height:Math.ceil(b.data.outer.offset().top-b.data.inner.offset().top||0),width:Math.ceil(b.data.outer.offset().left-b.data.inner.offset().left||0)}}function z(){var a=n(!0);return!(a.height||a.width)}function u(a){a=a.originalEvent;return a.axis&&a.axis===a.HORIZONTAL_AXIS||a.wheelDeltaX?!1:!0}var b={data:{index:0,name:"scrollbar"},macosx:/mac/i.test(navigator.platform),mobile:/android|webos|iphone|ipad|ipod|blackberry/i.test(navigator.userAgent),overlay:null,scroll:null,scrolls:[],webkit:/webkit/i.test(navigator.userAgent)&&
!/edge\/\d+/i.test(navigator.userAgent)};b.scrolls.add=function(a){this.remove(a).push(a)};b.scrolls.remove=function(a){for(;0<=d.inArray(a,this);)this.splice(d.inArray(a,this),1);return this};var q={autoScrollSize:!0,autoUpdate:!0,debug:!1,disableBodyScroll:!1,duration:200,ignoreMobile:!1,ignoreOverlay:!1,scrollStep:30,showArrows:!1,stepScrolling:!0,scrollx:null,scrolly:null,onDestroy:null,onInit:null,onScroll:null,onUpdate:null},y=function(a){b.scroll||(b.overlay=z(),b.scroll=n(),v(),d(window).resize(function(){var a=
!1;if(b.scroll&&(b.scroll.height||b.scroll.width)){var c=n();if(c.height!==b.scroll.height||c.width!==b.scroll.width)b.scroll=c,a=!0}v(a)}));this.container=a;this.namespace=".scrollbar_"+b.data.index++;this.options=d.extend({},q,window.jQueryScrollbarOptions||{});this.scrollTo=null;this.scrollx={};this.scrolly={};a.data(b.data.name,this);b.scrolls.add(this)};y.prototype={destroy:function(){if(this.wrapper){this.container.removeData(b.data.name);b.scrolls.remove(this);var a=this.container.scrollLeft(),
e=this.container.scrollTop();this.container.insertBefore(this.wrapper).css({height:"",margin:"","max-height":""}).removeClass("scroll-content scroll-scrollx_visible scroll-scrolly_visible").off(this.namespace).scrollLeft(a).scrollTop(e);this.scrollx.scroll.removeClass("scroll-scrollx_visible").find("div").andSelf().off(this.namespace);this.scrolly.scroll.removeClass("scroll-scrolly_visible").find("div").andSelf().off(this.namespace);this.wrapper.remove();d(document).add("body").off(this.namespace);
d.isFunction(this.options.onDestroy)&&this.options.onDestroy.apply(this,[this.container])}},init:function(a){var e=this,c=this.container,l=this.containerWrapper||c,g=this.namespace,h=d.extend(this.options,a||{}),f={x:this.scrollx,y:this.scrolly},k=this.wrapper;a=c.scrollLeft();var t=c.scrollTop();if(b.mobile&&h.ignoreMobile||b.overlay&&h.ignoreOverlay||b.macosx&&!b.webkit)return!1;if(k)l.css({height:"auto","margin-bottom":-1*b.scroll.height+"px","margin-right":-1*b.scroll.width+"px","max-height":""});
else{this.wrapper=k=d("<div>").addClass("scroll-wrapper").addClass(c.attr("class")).css("position","absolute"==c.css("position")?"absolute":"relative").insertBefore(c).append(c);c.is("textarea")&&(this.containerWrapper=l=d("<div>").insertBefore(c).append(c),k.addClass("scroll-textarea"));l.addClass("scroll-content").css({height:"auto","margin-bottom":-1*b.scroll.height+"px","margin-right":-1*b.scroll.width+"px","max-height":""});c.on("scroll"+g,function(a){d.isFunction(h.onScroll)&&h.onScroll.call(e,
{maxScroll:f.y.maxScrollOffset,scroll:c.scrollTop(),size:f.y.size,visible:f.y.visible},{maxScroll:f.x.maxScrollOffset,scroll:c.scrollLeft(),size:f.x.size,visible:f.x.visible});f.x.isVisible&&f.x.scroll.bar.css("left",c.scrollLeft()*f.x.kx+"px");f.y.isVisible&&f.y.scroll.bar.css("top",c.scrollTop()*f.y.kx+"px")});k.on("scroll"+g,function(){k.scrollTop(0).scrollLeft(0)});if(h.disableBodyScroll){var n=function(a){u(a)?f.y.isVisible&&f.y.mousewheel(a):f.x.isVisible&&f.x.mousewheel(a)};k.on("MozMousePixelScroll"+
g,n);k.on("mousewheel"+g,n);if(b.mobile)k.on("touchstart"+g,function(a){a=a.originalEvent.touches&&a.originalEvent.touches[0]||a;var e=a.pageX,b=a.pageY,h=c.scrollLeft(),f=c.scrollTop();d(document).on("touchmove"+g,function(a){var d=a.originalEvent.targetTouches&&a.originalEvent.targetTouches[0]||a;c.scrollLeft(h+e-d.pageX);c.scrollTop(f+b-d.pageY);a.preventDefault()});d(document).on("touchend"+g,function(){d(document).off(g)})})}d.isFunction(h.onInit)&&h.onInit.apply(this,[c])}d.each(f,function(a,
b){var l=null,k=1,p="x"===a?"scrollLeft":"scrollTop",r=h.scrollStep,n=function(){var a=c[p]();c[p](a+r);1==k&&a+r>=m&&(a=c[p]());-1==k&&a+r<=m&&(a=c[p]());c[p]()==a&&l&&l()},m=0;b.scroll||(b.scroll=e._getScroll(h["scroll"+a]).addClass("scroll-"+a),h.showArrows&&b.scroll.addClass("scroll-element_arrows_visible"),b.mousewheel=function(d){if(!b.isVisible||"x"===a&&u(d))return!0;if("y"===a&&!u(d))return f.x.mousewheel(d),!0;var g=-1*d.originalEvent.wheelDelta||d.originalEvent.detail,h=b.size-b.visible-
b.offset;if(0<g&&m<h||0>g&&0<m)m+=g,0>m&&(m=0),m>h&&(m=h),e.scrollTo=e.scrollTo||{},e.scrollTo[p]=m,setTimeout(function(){e.scrollTo&&(c.stop().animate(e.scrollTo,240,"linear",function(){m=c[p]()}),e.scrollTo=null)},1);d.preventDefault();return!1},b.scroll.on("MozMousePixelScroll"+g,b.mousewheel).on("mousewheel"+g,b.mousewheel).on("mouseenter"+g,function(){m=c[p]()}),b.scroll.find(".scroll-arrow, .scroll-element_track").on("mousedown"+g,function(g){if(1!=g.which)return!0;k=1;var f=g["x"===a?"pageX":
"pageY"],A=b.size-b.visible-b.offset,w=b.scroll.bar.offset()["x"===a?"left":"top"],t=b.scroll.bar["x"===a?"outerWidth":"outerHeight"](),x=0,q=0;d(this).hasClass("scroll-arrow")?(k=d(this).hasClass("scroll-arrow_more")?1:-1,r=h.scrollStep*k,m=0<k?A:0):(k=f>w+t?1:f<w?-1:0,r=Math.round(.75*b.visible)*k,m=f-w-(h.stepScrolling?1==k?t:0:Math.round(t/2)),m=c[p]()+m/b.kx);e.scrollTo=e.scrollTo||{};e.scrollTo[p]=h.stepScrolling?c[p]()+r:m;h.stepScrolling&&(l=function(){m=c[p]();clearInterval(q);clearTimeout(x);
q=x=0},x=setTimeout(function(){q=setInterval(n,40)},h.duration+100));setTimeout(function(){e.scrollTo&&(c.animate(e.scrollTo,h.duration),e.scrollTo=null)},1);return e._handleMouseDown(l,g)}),b.scroll.bar.on("mousedown"+g,function(h){if(1!=h.which)return!0;var f=h["x"===a?"pageX":"pageY"],l=c[p]();b.scroll.addClass("scroll-draggable");d(document).on("mousemove"+g,function(d){d=parseInt((d["x"===a?"pageX":"pageY"]-f)/b.kx,10);c[p](l+d)});return e._handleMouseDown(function(){b.scroll.removeClass("scroll-draggable");
m=c[p]()},h)}))});d.each(f,function(a,c){var b="scroll-scroll"+a+"_visible",d="x"==a?f.y:f.x;c.scroll.removeClass(b);d.scroll.removeClass(b);l.removeClass(b)});d.each(f,function(a,b){d.extend(b,"x"==a?{offset:parseInt(c.css("left"),10)||0,size:c.prop("scrollWidth"),visible:k.width()}:{offset:parseInt(c.css("top"),10)||0,size:c.prop("scrollHeight"),visible:k.height()})});this._updateScroll("x",this.scrollx);this._updateScroll("y",this.scrolly);d.isFunction(h.onUpdate)&&h.onUpdate.apply(this,[c]);d.each(f,
function(a,b){var d="x"===a?"left":"top",e="x"===a?"outerWidth":"outerHeight",g="x"===a?"width":"height",f=parseInt(c.css(d),10)||0,l=b.size;f=b.visible+f;d=b.scroll.size[e]()+(parseInt(b.scroll.size.css(d),10)||0);h.autoScrollSize&&(b.scrollbarSize=parseInt(d*f/l,10),b.scroll.bar.css(g,b.scrollbarSize+"px"));b.scrollbarSize=b.scroll.bar[e]();b.kx=(d-b.scrollbarSize)/(l-f)||1;b.maxScrollOffset=l-f});c.scrollLeft(a).scrollTop(t).trigger("scroll")},_getScroll:function(a){var b={advanced:'<div class="scroll-element"><div class="scroll-element_corner"></div><div class="scroll-arrow scroll-arrow_less"></div><div class="scroll-arrow scroll-arrow_more"></div><div class="scroll-element_outer"><div class="scroll-element_size"></div><div class="scroll-element_inner-wrapper"><div class="scroll-element_inner scroll-element_track"><div class="scroll-element_inner-bottom"></div></div></div><div class="scroll-bar"><div class="scroll-bar_body"><div class="scroll-bar_body-inner"></div></div><div class="scroll-bar_bottom"></div><div class="scroll-bar_center"></div></div></div></div>',
simple:'<div class="scroll-element"><div class="scroll-element_outer"><div class="scroll-element_size"></div><div class="scroll-element_track"></div><div class="scroll-bar"></div></div></div>'};b[a]&&(a=b[a]);a||(a=b.simple);a="string"==typeof a?d(a).appendTo(this.wrapper):d(a);d.extend(a,{bar:a.find(".scroll-bar"),size:a.find(".scroll-element_size"),track:a.find(".scroll-element_track")});return a},_handleMouseDown:function(a,b){var c=this.namespace;d(document).on("blur"+c,function(){d(document).add("body").off(c);
a&&a()});d(document).on("dragstart"+c,function(a){a.preventDefault();return!1});d(document).on("mouseup"+c,function(){d(document).add("body").off(c);a&&a()});d("body").on("selectstart"+c,function(a){a.preventDefault();return!1});b&&b.preventDefault();return!1},_updateScroll:function(a,e){var c=this.container,l=this.containerWrapper||c,g="scroll-scroll"+a+"_visible",h="x"===a?this.scrolly:this.scrollx,f=parseInt(this.container.css("x"===a?"left":"top"),10)||0,k=this.wrapper,n=e.size;f=e.visible+f;
e.isVisible=1<n-f;e.isVisible?(e.scroll.addClass(g),h.scroll.addClass(g),l.addClass(g)):(e.scroll.removeClass(g),h.scroll.removeClass(g),l.removeClass(g));"y"===a&&(c.is("textarea")||n<f?l.css({height:f+b.scroll.height+"px","max-height":"none"}):l.css({"max-height":f+b.scroll.height+"px"}));if(e.size!=c.prop("scrollWidth")||h.size!=c.prop("scrollHeight")||e.visible!=k.width()||h.visible!=k.height()||e.offset!=(parseInt(c.css("left"),10)||0)||h.offset!=(parseInt(c.css("top"),10)||0))d.extend(this.scrollx,
{offset:parseInt(c.css("left"),10)||0,size:c.prop("scrollWidth"),visible:k.width()}),d.extend(this.scrolly,{offset:parseInt(c.css("top"),10)||0,size:this.container.prop("scrollHeight"),visible:k.height()}),this._updateScroll("x"===a?"y":"x",h)}};d.fn.scrollbar=function(a,e){"string"!==typeof a&&(e=a,a="init");"undefined"===typeof e&&(e=[]);d.isArray(e)||(e=[e]);this.not("body, .scroll-wrapper").each(function(){var c=d(this),l=c.data(b.data.name);if(l||"init"===a)l||(l=new y(c)),l[a]&&l[a].apply(l,
e)});return this};d.fn.scrollbar.options=q;var v=function(){var a=0,d=0;return function(c){var e;for(e=0;e<b.scrolls.length;e++){var g=b.scrolls[e],h=g.container,f=g.options,k=g.wrapper,n=g.scrollx,q=g.scrolly;if(c||f.autoUpdate&&k&&k.is(":visible")&&(h.prop("scrollWidth")!=n.size||h.prop("scrollHeight")!=q.size||k.width()!=n.visible||k.height()!=q.visible))g.init(),f.debug&&(window.console&&console.log({scrollHeight:h.prop("scrollHeight")+":"+g.scrolly.size,scrollWidth:h.prop("scrollWidth")+":"+
g.scrollx.size,visibleHeight:k.height()+":"+g.scrolly.visible,visibleWidth:k.width()+":"+g.scrollx.visible},!0),d++)}clearTimeout(a);a=setTimeout(v,300)}}();window.angular&&function(a){a.module("jQueryScrollbar",[]).provider("jQueryScrollbar",function(){return{setOptions:function(b){a.extend(q,b)},$get:function(){return{options:a.copy(q)}}}}).directive("jqueryScrollbar",["jQueryScrollbar","$parse",function(a,b){return{restrict:"AC",link:function(c,d,e){c=b(e.jqueryScrollbar)(c);d.scrollbar(c||a.options).on("$destroy",
function(){d.scrollbar("destroy")})}}}])}(window.angular)});
